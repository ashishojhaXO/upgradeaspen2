<div class="col-lg-12 col-md-12">
  <span class="pull-left" style="color: #0777bc;font-size: 20px;display: inline;">PAYMENTS</span>
  <div class="pull-right">
    <a title="Create Payment" class="btn btn-success" (click)="handleShowModal(AddPayment)" href="javascript:void(0)">CREATE TRANSACTION</a>
  </div>
</div>
<div *ngIf="summary.length" style="background-color: #FFF; width: 100%;margin-top: 50px; padding: 10px 0px">
  <div style="margin:0px 0px 20px 13px; font-size: 18px;">
    <span>Summary</span>
  </div>
  <div *ngFor="let item of summary; let i = index;">
     <div style="margin: 5px 13px;">
       <span>{{item.type}}</span> : <span>{{item.amount}}</span>
     </div>
  </div>
</div>
<div>
  <div>
    <div class="gridOverflow pull-left" style="padding: 20px" *ngIf="dataObject.isDataAvailable">
      <app-data-table2 [dataObject]="dataObject" (triggerActions)="this[$event.action]($event)"></app-data-table2>
      <!--<app-data-table1 [dataObject]="dataObject" [id]="dashboard" [height]="height"></app-data-table1>-->
    </div>
    <div class="clearfix"></div>
    <div class="page-header" *ngIf="!dataObject.isDataAvailable">
      <app-custom-spinner *ngIf="showSpinner" class="page-spinner"></app-custom-spinner>
      <div style="height: 200px;background-color: #ffff; width: 100%;padding: 17% 42%;">There is no data to display.</div>
    </div>
  </div>
</div>
<div style="width:100%">
    <app-pop-up-modal #AddPayment>
      <div class="app-modal-header" style="margin: 15px 0px 0px 10px">
        Add Transaction
      </div>
      <div class="app-modal-body">
        <div class="content">
          <form [formGroup]="paymentForm" novalidate (keydown.enter)="$event.preventDefault()">
            <div class="form">
                <div class="form-group-fields">
                    <label class="col-lg-4 col-md-4 ">Org : </label>
                    <select2 width="100%" class="col-lg-8 col-md-8 select2-field"
                    [value]="selectedOrg"
                    (valueChanged)="OnOrgChanged($event);"
                    [data]="organizations"
                    ></select2>
                  </div>
                  <div class="form-group-fields" >
                      <label class="col-lg-4 col-md-4">Vendor : </label>
                      <select2 width="100%" placeholder="Select" class="col-lg-8 col-md-8 select2-field"
                      [value]="selectedVendor"
                      (valueChanged)="OnVendorChanged($event);"
                      [data]="vendors"
                      ></select2>
                    </div>
                    <div class="form-group-fields">
                        <label class="col-lg-4 col-md-4">Transaction Type : </label>
                        <div class="col-lg-8 col-md-8 checkbox-field">
                            <input type="radio" value="ar" formControlName="type" [(ngModel)]="paymentModel.type" > AR
                            <input type="radio" value="ap" formControlName="type" [(ngModel)]="paymentModel.type" > AP
                        </div>
                    </div>

                    <div class="form-group-fields" *ngIf="paymentModel.type === 'ap'">
                      <label class="col-lg-4 col-md-4">Payment Method : </label>
                      <select2 width="100%"   class="col-lg-8 col-md-8 select2-field"

                      [value]="selectedPaymentMethod"
                            (valueChanged)="OnPaymentMethodChanged($event);"
                            [data]="paymentMethodOptions"
                      ></select2>
                    </div>


              <div class="form-group-fields">
                <label class="col-lg-4 col-md-4">Amount: </label>
                <input formControlName="amount" type="text" [(ngModel)]="paymentModel.amount" name="amount" class="col-lg-8 col-md-8 form-field"  />
                {{paymentModel.amount.dirty}}
                <!--<div *ngIf="paymentModel.amount.invalid && (paymentModel.amount.dirty || paymentModel.amount.touched)" class="alert alert-danger">-->
                  <!--<div *ngIf="paymentModel.amount.errors">-->
                    <!--Amount is required.-->
                  <!--</div>-->
                <!--</div>-->
              </div>
              <div class="col-lg-12 col-md-12 form-field" *ngIf="paymentForm.controls['amount'].invalid && (paymentForm.controls['amount'].dirty || paymentForm.controls['amount'].touched)" class="alert alert-danger">
                <div *ngIf="paymentForm.controls['amount'].errors.required">
                  Amount is required.
                </div>
                <div *ngIf="paymentForm.controls['amount'].errors.pattern">
                  Amount needs to be a number
                </div>
              </div>
              <div class="form-group-fields">
                <label class="col-lg-4 col-md-4">External Request Id : </label>
                <input formControlName="invoiceRequestId" [(ngModel)]="paymentModel.invoiceRequestId"  type="text" class="col-lg-8 col-md-8 form-field"/>
              </div>
              <div class="form-group-fields">
                <label class="col-lg-4 col-md-4">Memo  : </label>
                <input formControlName="memo" type="text"  [(ngModel)]="paymentModel.memo" class="col-lg-8 col-md-8 form-field"/>
              </div>
              <div class="form-group-fields">
                <label class="col-lg-4 col-md-4">Status : </label>
                <select2 width="100%"   class="col-lg-8 col-md-8 select2-field"

                [value]="selectedStatus"
                      (valueChanged)="OnStatusChanged($event);"
                      [data]="statusOptions"
                ></select2>
              </div>

              <div *ngIf="error && error.message" style="text-align: center">
                <span [class]="error.type === 'success' ? 'success' : 'fail'">{{error.message}}</span>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="app-modal-footer">
        <button type="button" class="action-btn" [disabled]="!paymentForm.valid" [style.cursor]="!paymentForm.valid ? 'not-allowed' : 'pointer'" (click)= "OnSubmit(AddPayment)">
          Add
        </button>
        <button type="button" class="inaction-btn" (click)="handleCloseModal(AddPayment)">
          Close
        </button>
      </div>
    </app-pop-up-modal>
</div>
